<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>íŠ¸ë¦¼2ë°˜ 12ì›” ì‘ì—… ìŠ¤ì¼€ì¤„</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      background: #f5f5f7;
      position: relative;
      overflow-x: hidden;
    }

    /* ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íŠ¸ë¦¬ ë°°ê²½ */
    .christmas-bg-tree {
      position: fixed;
      right: 5%;
      bottom: 5%;
      font-size: 140px;
      opacity: 0.07;
      pointer-events: none;
      z-index: 1;
    }

    /* â„ ëˆˆì†¡ì´ */
    .snowflake {
      position: fixed;
      top: -10vh;
      color: white;
      font-size: 12px;
      opacity: 0.8;
      pointer-events: none;
      z-index: 10;
      animation-name: snow-fall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }

    @keyframes snow-fall {
      0% { transform: translateY(-10vh); }
      100% { transform: translateY(110vh); }
    }

    /* í—¤ë” */
    .header {
      background: #111;
      color: white;
      padding: 16px;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 20;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    }

    .header-title {
      font-size: 22px;
      font-weight: 800;
      margin-bottom: 14px;
      width: 100%;
      text-align: center;
    }

    .today-btn-center {
      padding: 8px 16px;
      border-radius: 999px;
      border: none;
      background: #007aff;
      color: #fff;
      font-size: 14px;
      display: inline-block;
      margin: 0 auto;
    }

    .container {
      padding: 20px;
      max-width: 900px;
      margin: 0 auto;
      position: relative;
      z-index: 5;
    }

    /* í…Œì´ë¸” */
    .table-wrapper {
      width: 100%;
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid #ddd;
      position: relative;
    }

    .daily-table {
      width: max-content;
      border-collapse: collapse;
      min-width: 600px;
    }

    th, td {
      border-bottom: 1px solid #eee;
      padding: 8px 12px;
      white-space: nowrap;
      text-align: center;
      background: white;
    }

    th {
      background: #fafafa;
      font-weight: 700;
    }

    /* ì´ë¦„ ì»¬ëŸ¼ ê³ ì • */
    .name-col {
      position: sticky;
      left: 0;
      background: white;
      z-index: 5;
      font-weight: 700;
      text-align: left;
    }

    /* ê²€ìƒ‰ ê²°ê³¼ ë‹´ë‹¹ì ì´ë¦„ íŒŒë€ìƒ‰ */
    .name {
      color: #007aff;
      font-weight: 700;
    }
  </style>
</head>

<body>
  <!-- ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ë°°ê²½ -->
  <div class="christmas-bg-tree">ğŸ„</div>

  <!-- í—¤ë” -->
  <header class="header">
    <div class="header-title">íŠ¸ë¦¼2ë°˜ 12ì›” ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</div>
    <button class="today-btn-center" id="todayBtn">ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ë™</button>
  </header>

  <div class="container">

    <h3>í•˜ë£¨ ì „ì²´ ìŠ¤ì¼€ì¤„ ë³´ê¸°</h3>
    <input type="date" id="dateInput">
    <button id="showDayBtn">ì¡°íšŒ</button>

    <div class="table-wrapper">
      <table class="daily-table">
        <thead>
          <tr>
            <th class="name-col">ì´ë¦„</th>
            <th>1ë¼ìš´ë“œ</th>
            <th>2ë¼ìš´ë“œ</th>
            <th>3ë¼ìš´ë“œ</th>
            <th>4ë¼ìš´ë“œ</th>
          </tr>
        </thead>
        <tbody id="dailyTableBody"></tbody>
      </table>
    </div>

    <h3>ê²€ìƒ‰ ê¸°ëŠ¥</h3>
    <div>
      <label>ì´ë¦„:</label>
      <select id="personName"></select>
    </div>
    <div>
      <label>ì‘ì—…ëª…:</label>
      <select id="lookupTask"></select>
    </div>

  </div>

  <script>
    /* ===== ë°ì´í„° ===== */
    const names = [
      "ì„±í›ˆ","ì›ë¹ˆ","ê¸¸ìš´","ëŒ€í˜„","ì§„ì†”","ì„œì§„","ì´ìŠ¬","ë¯¼êµ­","ì„±ì²œ",
      "ì¶©í›ˆ","ê°‘ìˆ˜","ê¸°ë°±","ìš°ë¹ˆ","ìŠ¹í˜¸","ì›…ê¸°","í•™í˜„","ë²”ì„±","ì„±í•´",
      "ì‘ê·œ","ì˜í™˜","ìƒê±´","ì¬ë•","ì˜¥ì—°","ìˆ˜ì‹ ","ì˜¤ì±„","ì¢…ìµ","ìš©ë‚¨"
    ];

    const taskNames = [
      "LH Bí•„ë¼","Lì—ì–´ë°±íˆ¬ì…","2ì¡°1ë²ˆ","LH Cí•„ë¼","SKì£¼ìœ êµ¬","ë©¤ë²„ì–´ìŠ¤","LH Aí•„ë¼",
      "ë§ˆìŠ¤í„°ì‹¤ë¦°ë”","ë„ì–´íƒˆê±°","ë‚š1","ë²”í¼ê°€ì´ë“œ","2ì¡°2ë²ˆ","ASì»¤ë²„","LH ë£¨1","LH ë£¨2",
      "RH Bí•„ë¼","Rì—ì–´ë°±íˆ¬ì…","RH Cí•„ë¼","RH Aí•„ë¼","í›„ë“œ","3ì¡°1ë²ˆ","í•˜ì´ë“œë¡œë‹‰ì²´ê²°",
      "ë‚š2","ì—”ì§„ì–´ìŠ¤","3ì¡°2ë²ˆ","RH ë£¨1","RH ë£¨2"
    ];

    /* ê°€ë‚˜ë‹¤ + ì•ŒíŒŒë²³ ì •ë ¬ */
    names.sort((a,b) => a.localeCompare(b));
    taskNames.sort((a,b)=>a.localeCompare(b));

    /* ë‚ ì§œ ê¸°ë°˜ ê³„ì‚° */
    const START_DATE = new Date(2025,11,1);
    const HOLIDAYS = ["2025-12-12","2025-12-25"];

    function formatDateISO(d){
      return d.getFullYear()+"-"+String(d.getMonth()+1).padStart(2,"0")+"-"+String(d.getDate()).padStart(2,"0");
    }

    function parseDate(v){
      if(!v) return null;
      const p=v.split("-");
      return new Date(Number(p[0]),Number(p[1])-1,Number(p[2]));
    }

    function isWorkDay(d){
      const iso = formatDateISO(d);
      if(d.getDay()===0) return false;
      if(HOLIDAYS.includes(iso)) return false;
      return true;
    }

    function getWorkIndex(date){
      if(date<START_DATE) return null;
      let idx=-1;
      let d=new Date(START_DATE);
      while(d<=date){
        if(isWorkDay(d)){
          idx++;
          if(formatDateISO(d)===formatDateISO(date)) return idx;
        }
        d.setDate(d.getDate()+1);
      }
      return null;
    }

    function getDailySchedule(date){
      if(!isWorkDay(date)) return null;
      const idx=getWorkIndex(date);
      if(idx===null) return null;

      return names.map((person,i)=>{
        const rounds=[];
        for(let r=0;r<4;r++){
          const taskIndex=(i + idx*4 + r) % taskNames.length;
          rounds.push(taskNames[taskIndex]);
        }
        return { person, rounds };
      });
    }

    /* ===== UI ë Œë” ===== */
    function renderDailySchedule(){
      const dateVal=document.getElementById("dateInput").value;
      const date=parseDate(dateVal);

      const tbody=document.getElementById("dailyTableBody");
      tbody.innerHTML="";

      const schedule=getDailySchedule(date);
      if(!schedule){
        tbody.innerHTML="<tr><td colspan='5'>ê·¼ë¬´ì¼ì´ ì•„ë‹™ë‹ˆë‹¤.</td></tr>";
        return;
      }

      schedule.forEach(row=>{
        const tr=document.createElement("tr");

        const tdName=document.createElement("td");
        tdName.className="name-col";
        tdName.textContent=row.person;
        tr.appendChild(tdName);

        row.rounds.forEach(r=>{
          const td=document.createElement("td");
          td.textContent=r;
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });
    }

    /* ëˆˆ ìƒì„± */
    function createSnowflakes(){
      const count=40;
      for(let i=0;i<count;i++){
        const el=document.createElement("span");
        el.className="snowflake";
        el.textContent="â„";
        el.style.left=(Math.random()*100)+"vw";
        el.style.animationDuration=(8+Math.random()*7)+"s";
        el.style.animationDelay=(Math.random()*10)+"s";
        document.body.appendChild(el);
      }
    }

    function init(){
      // ë‚ ì§œ ê¸°ë³¸ê°’
      document.getElementById("dateInput").value = "2025-12-01";

      // ì´ë¦„ ëª©ë¡
      const personSel=document.getElementById("personName");
      names.forEach(n=>{
        const o=document.createElement("option");
        o.value=n; o.textContent=n;
        personSel.appendChild(o);
      });

      // ì‘ì—…ëª… ëª©ë¡
      const taskSel=document.getElementById("lookupTask");
      taskNames.forEach(t=>{
        const o=document.createElement("option");
        o.value=t; o.textContent=t;
        taskSel.appendChild(o);
      });

      document.getElementById("showDayBtn").addEventListener("click",renderDailySchedule);

      document.getElementById("todayBtn").addEventListener("click",()=>{
        const today = "2025-12-01"; 
        document.getElementById("dateInput").value=today;
        renderDailySchedule();
        window.scrollTo({top:0,behavior:"smooth"});
      });

      renderDailySchedule();
      createSnowflakes();
    }

    window.addEventListener("DOMContentLoaded",init);
  </script>
</body>
</html>
