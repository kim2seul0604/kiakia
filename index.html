<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>트림2반 작업 스케줄 조회</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#f5f5f7;
  color:#222;
}

header {
  background:#111;
  color:#fff;
  padding:16px;
  text-align:center;
  position:sticky;
  top:0;
  z-index:10;
}

.today-btn {
  margin-top:10px;
  padding:8px 18px;
  border:none;
  border-radius:999px;
  background:#0a8a43;
  color:#fff;
}

.container {
  max-width:960px;
  margin:0 auto;
  padding:16px;
}

.card {
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:16px;
  box-shadow:0 6px 16px rgba(0,0,0,.06);
}

h2 {
  font-size:16px;
  margin-bottom:10px;
}

input {
  padding:6px 10px;
  font-size:14px;
  border-radius:8px;
  border:1px solid #ccc;
}

button.primary {
  padding:8px 16px;
  border-radius:999px;
  border:none;
  background:#007aff;
  color:#fff;
}

.warning {
  color:#c00;
  font-size:13px;
  margin-top:6px;
}

.table-wrap {
  overflow-x:auto;
  margin-top:8px;
}

table {
  border-collapse:collapse;
  min-width:600px;
  width:max-content;
  font-size:11.5px;
}

th, td {
  padding:6px 8px;
  border-bottom:1px solid #eee;
  text-align:center;
  white-space:nowrap;
}

th {
  background:#fafafa;
}

.name-col {
  position:sticky;
  left:0;
  background:#fff;
  font-weight:700;
  z-index:2;
}

.round-1 { color:#aaa; }
.round-2 { color:#777; }
.round-3 { color:#444; }
.round-4 { color:#000; font-weight:600; }
</style>
</head>

<body>

<header>
  <div style="font-size:22px;font-weight:800;">트림2반 작업 스케줄 조회</div>
  <button class="today-btn" onclick="goToday()">오늘</button>
</header>

<div class="container">

<!-- ① 하루 전체 스케줄 -->
<div class="card">
  <h2>① 하루 전체 스케줄 보기</h2>
  <input type="date" id="dayDate">
  <button class="primary" onclick="renderDay()">조회</button>
  <div id="dayWarn" class="warning"></div>

  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th class="name-col">이름</th>
          <th>1R</th>
          <th>2R</th>
          <th>3R</th>
          <th>4R</th>
        </tr>
      </thead>
      <tbody id="dayBody"></tbody>
    </table>
  </div>
</div>

</div>

<script>
/* ===== 안전한 날짜 파싱 (아이폰 대응) ===== */
function parseDate(v){
  if(!v) return null;
  const [y,m,d] = v.split('-').map(Number);
  return new Date(y, m-1, d);
}

/* ===== 기준 ===== */
const START = new Date(2026,0,5);

const HOLIDAYS = [
  "2026-02-16",
  "2026-02-17",
  "2026-02-18",
  "2026-02-19"
];

const names = [
  "영훈","갑수","기백","우빈","승호","웅기","학현","범성","성해",
  "응규","영환","상건","재덕","옥연","수신","오채","은우","정훈","용남",
  "성훈","원빈","길운","대현","진솔","준현","서진","이슬","민국","성천","충훈"
];

const tasks = [
  "LH휀다","LH B필라","L에어백투입","2조1번","LH C필라",
  "SK주유구","멤버어스","LH A필라","마스터백","L도어탈거",
  "낚1","범퍼가이드","2조2번","AS커버","LH 루1","LH 루2",
  "RH 휀다","RH B필라","R에어백투입","RH C필라","R A필라",
  "후드","3조1번","R도어탈거","하이드로닉체결","낚2","엔진어스",
  "3조2번","RH 루1","RH 루2"
];

/* ===== 유틸 ===== */
function iso(d){ return d.toISOString().slice(0,10); }

function isWork(d){
  if(d < START) return false;
  if(d.getDay() === 0) return false; // 일요일
  return !HOLIDAYS.includes(iso(d));
}

function workIndex(d){
  if(!isWork(d)) return null;
  let i = -1;
  let t = new Date(START);
  while(t <= d){
    if(isWork(t)) i++;
    if(iso(t) === iso(d)) return i;
    t.setDate(t.getDate() + 1);
  }
  return null;
}

/* ===== 스케줄 계산 ===== */
function getSchedule(d){
  const idx = workIndex(d);
  if(idx === null) return null;

  return names.map((name,i)=>{
    return {
      name,
      rounds: [
        tasks[(i + idx*4 + 0) % tasks.length],
        tasks[(i + idx*4 + 1) % tasks.length],
        tasks[(i + idx*4 + 2) % tasks.length],
        tasks[(i + idx*4 + 3) % tasks.length]
      ]
    };
  });
}

/* ===== 하루 전체 출력 ===== */
function renderDay(){
  const d = parseDate(dayDate.value);
  dayBody.innerHTML = "";

  if(!d || !isWork(d)){
    dayWarn.textContent = "휴무일입니다.";
    return;
  }

  dayWarn.textContent = "";
  const s = getSchedule(d);

  s.forEach(r=>{
    dayBody.innerHTML += `
      <tr>
        <td class="name-col">${r.name}</td>
        <td class="round-1">${r.rounds[0]}</td>
        <td class="round-2">${r.rounds[1]}</td>
        <td class="round-3">${r.rounds[2]}</td>
        <td class="round-4">${r.rounds[3]}</td>
      </tr>
    `;
  });
}

/* ===== 오늘 버튼 ===== */
function goToday(){
  const t = new Date();
  const d = isWork(t) ? t : START;
  dayDate.value = iso(d);
  renderDay();
}

goToday();
</script>

</body>
</html>