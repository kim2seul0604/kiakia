<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:#f5f5f7;color:#222;}
header{background:#111;color:#fff;padding:16px;text-align:center;position:sticky;top:0;z-index:10;}
.today-btn{margin-top:10px;padding:8px 18px;border:none;border-radius:999px;background:#0a8a43;color:#fff;}
.container{max-width:960px;margin:0 auto;padding:16px;}
.card{background:#fff;border-radius:16px;padding:14px;margin-bottom:16px;box-shadow:0 6px 16px rgba(0,0,0,.06);}
h2{font-size:16px;margin-bottom:10px;text-align:center;}
input{padding:6px 10px;font-size:14px;border-radius:8px;border:1px solid #ccc;}
button.primary{padding:8px 16px;border-radius:999px;border:none;background:#007aff;color:#fff;}
.warning{color:#c00;font-size:13px;margin-top:6px;text-align:center;}
.date-row{display:flex;justify-content:center;align-items:center;gap:10px;margin-bottom:6px;}
.table-wrap{overflow-x:auto;margin-top:8px;}
table{border-collapse:collapse;min-width:600px;width:max-content;font-size:11.5px;}
th,td{padding:6px 8px;border-bottom:1px solid #eee;text-align:center;white-space:nowrap;}
th{background:#fafafa;}
.name-col{position:sticky;left:0;background:#fff;font-weight:700;z-index:2;}
.round-1{color:#4B5FA8;}
.round-2{color:#66B2FF;}
.round-3{color:#1E88E5;}
.round-4{color:#0D47A1;font-weight:600;}
.help-btn{position:fixed;right:14px;bottom:14px;width:44px;height:44px;border-radius:50%;border:none;background:#007aff;color:#fff;font-size:22px;font-weight:800;box-shadow:0 4px 10px rgba(0,0,0,.25);z-index:50;}
.notice-list{margin:0;padding:0 0 0 18px;font-size:13px;line-height:1.5;}
.notice-sub{font-size:12px;color:#666;text-align:center;margin-top:8px;}
.meta{font-size:12px;color:#666;text-align:center;margin-top:10px;}
</style>
</head>

<body>
<header>
  <div style="font-size:22px;font-weight:800;">íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</div>
  <button class="today-btn" onclick="goToday()">ì˜¤ëŠ˜ë„ í™”ì´íŒ…~â€¼ï¸</button>
</header>

<div class="container">
  <div class="card">
    <h2>ğŸ¥âœˆï¸ íŠ¸ë¦¼ 2ë°˜ ì „ì²´ ìŠ¤ì¼€ì¤„ ì¡°íšŒí•˜ê¸° ğŸ€ğŸ¥</h2>

    <div class="date-row">
      <input type="date" id="dayDate">
      <button class="primary" onclick="renderDay()">ì¡°íšŒ</button>
    </div>

    <div id="dayWarn" class="warning"></div>

    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th class="name-col">ì´ë¦„</th>
            <th>1R</th>
            <th>2R</th>
            <th>3R</th>
            <th>4R</th>
          </tr>
        </thead>
        <tbody id="dayBody"></tbody>
      </table>
    </div>
  </div>

  <!-- âœ… ê³µì§€: ì½”ë“œ ê³ ì • í‘œì‹œ -->
  <div class="card">
    <h2>ğŸ“Œ ê³µì§€</h2>
    <ul class="notice-list" id="noticeList"></ul>
    <div class="notice-sub">â€» ê³µì§€ëŠ” ê´€ë¦¬ìê°€ ìˆ˜ì •í•©ë‹ˆë‹¤.</div>
    <div class="meta" id="metaText"></div>
  </div>
</div>

<!-- â“ ë„ì›€ë§ ë²„íŠ¼ -->
<button class="help-btn" id="helpBtn">?</button>

<script>
/* =========================
   ë²„ì „ / ìˆ˜ì •ì¼
========================= */
const APP_VERSION = "v1.0.2";
const LAST_MODIFIED = "2026-01-22";

/* =========================
   âœ… ê³µì§€(ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ë©´ ë¨)
========================= */
const NOTICES = [
  "â€¢ 1/22(ëª©) 4ë¼ìš´ë“œ íœ´ë¬´ ë°˜ì˜",
  "â€¢ ì„¤ë‚  íœ´ë¬´(2/16~2/19) ë°˜ì˜"
];

/* =========================
   ì•„ì´í° ì•ˆì „ ë‚ ì§œ íŒŒì‹±
========================= */
function parseDate(v){
  if(!v) return null;
  const [y,m,d] = v.split('-').map(Number);
  return new Date(y, m-1, d);
}

/* =========================
   ë¡œì»¬(í•œêµ­ì‹œê°„) ISO ë¬¸ìì—´
========================= */
function pad2(n){ return String(n).padStart(2,'0'); }
function isoLocal(d){
  return d.getFullYear() + "-" + pad2(d.getMonth()+1) + "-" + pad2(d.getDate());
}

/* =========================
   ê¸°ì¤€ ì„¤ì •
========================= */
const START = new Date(2026,0,5);

/* ê¸°ì¤€ì¼(1/13): LHíœ€ë‹¤ = ê°‘ìˆ˜ */
const BASE_DATE = new Date(2026,0,13);
const BASE_TASK = "LHíœ€ë‹¤";
const BASE_PERSON = "ê°‘ìˆ˜";

/* íœ´ë¬´ì¼ */
const HOLIDAYS = [
  "2026-02-16","2026-02-17","2026-02-18","2026-02-19"
];

/* ì‘ì—…ì ìˆœì„œ */
const names = [
  "ì˜í›ˆ","ê°‘ìˆ˜","ê¸°ë°±","ìš°ë¹ˆ","ìŠ¹í˜¸","ì›…ê¸°","í•™í˜„","ë²”ì„±","ì„±í•´",
  "ì‘ê·œ","ì˜í™˜","ìƒê±´","ì¬ë•","ì˜¥ì—°","ìˆ˜ì‹ ","ì˜¤ì±„","ì€ìš°","ì •í›ˆ","ìš©ë‚¨",
  "ì„±í›ˆ","ì›ë¹ˆ","ê¸¸ìš´","ëŒ€í˜„","ì§„ì†”","ì¤€í˜„","ì„œì§„","ì´ìŠ¬","ë¯¼êµ­","ì„±ì²œ","ì¶©í›ˆ"
];

/* ì‘ì—… ìˆœì„œ */
const tasks = [
  "LHíœ€ë‹¤","LH Bí•„ë¼","Lì—ì–´ë°±íˆ¬ì…","2ì¡°1ë²ˆ","LH Cí•„ë¼",
  "SKì£¼ìœ êµ¬","ë©¤ë²„ì–´ìŠ¤","LH Aí•„ë¼","ë§ˆìŠ¤í„°ë°±","Lë„ì–´íƒˆê±°",
  "ë‚š1","ë²”í¼ê°€ì´ë“œ","2ì¡°2ë²ˆ","ASì»¤ë²„","LH ë£¨1","LH ë£¨2",
  "RH íœ€ë‹¤","RH Bí•„ë¼","Rì—ì–´ë°±íˆ¬ì…","RH Cí•„ë¼","R Aí•„ë¼",
  "í›„ë“œ","3ì¡°1ë²ˆ","Rë„ì–´íƒˆê±°","í•˜ì´ë“œë¡œë‹‰ì²´ê²°","ë‚š2","ì—”ì§„ì–´ìŠ¤",
  "3ì¡°2ë²ˆ","RH ë£¨1","RH ë£¨2"
];

/* =========================
   ìœ í‹¸
========================= */
function isWork(d){
  if(d < START) return false;
  if(d.getDay() === 0) return false;                 // ì¼ìš”ì¼ íœ´ë¬´
  return !HOLIDAYS.includes(isoLocal(d));            // ì§€ì • íœ´ë¬´ì¼
}

function workIndex(d){
  if(!isWork(d)) return null;
  let i = -1;
  let t = new Date(START.getTime());
  while(t <= d){
    if(isWork(t)) i++;
    if(isoLocal(t) === isoLocal(d)) return i;
    t.setDate(t.getDate() + 1);
  }
  return null;
}

/* =========================
   ìŠ¤ì¼€ì¤„ ë¡œì§
========================= */
function getSchedule(d){
  const todayIdx = workIndex(d);
  const baseIdx = workIndex(BASE_DATE);
  if(todayIdx === null || baseIdx === null) return null;

  const dayShift = (todayIdx - baseIdx) * 4;
  const baseTaskIdx = tasks.indexOf(BASE_TASK);
  const basePersonIdx = names.indexOf(BASE_PERSON);

  if(baseTaskIdx < 0 || basePersonIdx < 0) return null;

  return names.map((name, personIdx)=>{
    const rounds = [];
    for(let r=0; r<4; r++){
      const taskIdx =
        (baseTaskIdx + dayShift + r + (personIdx - basePersonIdx) + tasks.length)
        % tasks.length;
      rounds.push(tasks[taskIdx]);
    }
    return { name, rounds };
  });
}

/* =========================
   í•˜ë£¨ ì „ì²´ ì¶œë ¥
========================= */
function renderDay(){
  const d = parseDate(document.getElementById("dayDate").value);
  const dayBody = document.getElementById("dayBody");
  const dayWarn = document.getElementById("dayWarn");
  dayBody.innerHTML = "";

  if(!d || !isWork(d)){
    dayWarn.textContent = "íœ´ë¬´ì¼ì…ë‹ˆë‹¤.";
    return;
  }

  const s = getSchedule(d);
  if(!s){
    dayWarn.textContent = "ìŠ¤ì¼€ì¤„ ê³„ì‚°ì— ë¬¸ì œê°€ ìˆì–´ìš”. (ê¸°ì¤€ ì‘ì—…/ì‘ì—…ì í™•ì¸ í•„ìš”)";
    return;
  }

  dayWarn.textContent = "";

  s.forEach(r=>{
    dayBody.innerHTML += `
      <tr>
        <td class="name-col">${r.name}</td>
        <td class="round-1">${r.rounds[0]}</td>
        <td class="round-2">${r.rounds[1]}</td>
        <td class="round-3">${r.rounds[2]}</td>
        <td class="round-4">${r.rounds[3]}</td>
      </tr>
    `;
  });
}

/* =========================
   ì˜¤ëŠ˜ ë²„íŠ¼
========================= */
function goToday(){
  const t = new Date();
  const d = isWork(t) ? t : START;
  document.getElementById("dayDate").value = isoLocal(d);
  renderDay();
}

/* =========================
   ê³µì§€ ë Œë”ë§(ì½”ë“œ ê³ ì •)
========================= */
function renderNotices(){
  const ul = document.getElementById("noticeList");
  ul.innerHTML = "";

  if(!NOTICES || NOTICES.length === 0){
    ul.innerHTML = "<li>ê³µì§€ ì—†ìŒ</li>";
    return;
  }

  NOTICES.forEach(msg=>{
    const li = document.createElement("li");
    li.textContent = msg;
    ul.appendChild(li);
  });

  document.getElementById("metaText").textContent =
    `ë²„ì „: ${APP_VERSION} / ìµœì¢… ìˆ˜ì •ì¼: ${LAST_MODIFIED}`;
}

/* =========================
   ë„ì›€ë§ ë²„íŠ¼
========================= */
document.getElementById("helpBtn").addEventListener("click", ()=>{
  alert(
    "ë§Œë“ ì‚¬ëŒ : ê¹€ì´ìŠ¬\n" +
    "ë²„ì „ : " + APP_VERSION + "\n"
  );
});

/* ì²« ì‹¤í–‰ */
renderNotices();
goToday();
</script>

</body>
</html>