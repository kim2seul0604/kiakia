<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
:root{
  --blue:#007aff;
  --green:#0a8a43;
  --bg:#f5f5f7;
}
body{
  margin:0;
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}
.header{
  background:#111;
  color:#fff;
  padding:16px 12px;
  text-align:center;
  position:sticky;
  top:0;
}
.header-title{
  font-size:22px;
  font-weight:800;
  margin-bottom:10px;
}
.today-btn{
  background:var(--green);
  color:#fff;
  border:none;
  padding:8px 18px;
  border-radius:999px;
  font-size:14px;
}
.container{
  max-width:960px;
  margin:0 auto;
  padding:16px;
}
.card{
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
}
h2{
  font-size:16px;
  margin:0 0 10px;
}
label{
  font-size:13px;
  font-weight:600;
}
input,select{
  width:100%;
  padding:6px 10px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-bottom:6px;
}
.primary-btn{
  background:var(--blue);
  color:#fff;
  border:none;
  padding:8px 14px;
  border-radius:999px;
  font-size:14px;
  margin-top:6px;
}
.weekday{
  font-size:12px;
  color:#666;
  margin-left:4px;
}
.table-wrap{
  overflow-x:auto;
  margin-top:10px;
}
table{
  border-collapse:collapse;
  min-width:600px;
}
th,td{
  border-bottom:1px solid #eee;
  padding:6px 8px;
  text-align:center;
  white-space:nowrap;
}
th{
  background:#fafafa;
}
.name-col{
  position:sticky;
  left:0;
  background:#fff;
  text-align:left;
}
.warning{
  color:#c00;
  font-size:13px;
  margin-top:8px;
}
.help-btn{
  position:fixed;
  bottom:12px;
  right:12px;
  width:42px;
  height:42px;
  border-radius:50%;
  background:var(--blue);
  color:#fff;
  border:none;
  font-size:20px;
}
</style>
</head>

<body>
<header class="header">
  <div class="header-title">íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</div>
  <button class="today-btn" onclick="location.href='survey.html'">ğŸ“‹ íŠ¹ê·¼ ì°¸ì—¬ ì¡°ì‚¬</button>
</header>

<div class="container">

<!-- â‘  ë‚ ì§œ + ë¼ìš´ë“œ + ì‘ì—…ëª… -->
<div class="card">
<h2>â‘  ë‚ ì§œ + ë¼ìš´ë“œ + ì‘ì—…ëª…</h2>
<label>ë‚ ì§œ</label>
<input type="date" id="d1"><span class="weekday" id="w1"></span>

<label>ë¼ìš´ë“œ</label>
<select id="round">
<option value="0">1ë¼ìš´ë“œ</option>
<option value="1">2ë¼ìš´ë“œ</option>
<option value="2">3ë¼ìš´ë“œ</option>
<option value="3">4ë¼ìš´ë“œ</option>
</select>

<label>ì‘ì—…ëª…</label>
<select id="task1"></select>
<select id="task2"></select>
<select id="task3"></select>

<button class="primary-btn" onclick="findWorker()">ì¡°íšŒ</button>
<div id="r1"></div>
</div>

<!-- â‘¡ ë‚ ì§œ + ì‘ì—…ì -->
<div class="card">
<h2>â‘¡ ë‚ ì§œ + ì‘ì—…ì</h2>
<label>ë‚ ì§œ</label>
<input type="date" id="d2"><span class="weekday" id="w2"></span>

<select id="p1"></select>
<select id="p2"></select>
<select id="p3"></select>

<button class="primary-btn" onclick="findPerson()">ì¡°íšŒ</button>
<div id="r2"></div>
</div>

<!-- â‘¢ í•˜ë£¨ ì „ì²´ -->
<div class="card">
<h2>â‘¢ í•˜ë£¨ ì „ì²´ ìŠ¤ì¼€ì¤„</h2>
<label>ë‚ ì§œ</label>
<input type="date" id="d3"><span class="weekday" id="w3"></span>
<button class="primary-btn" onclick="renderDay()">ì¡°íšŒ</button>

<div class="table-wrap">
<table>
<thead>
<tr>
<th class="name-col">ì´ë¦„</th>
<th>1R</th><th>2R</th><th>3R</th><th>4R</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>
</div>

</div>

<button class="help-btn" onclick="alert('ë§Œë“ ì‚¬ëŒ : ê¹€ì´ìŠ¬')">?</button>

<script>
const START = new Date(2026,0,5); // 2026-01-05

const names = [
"ì˜í›ˆ","ê°‘ìˆ˜","ê¸°ë°±","ìš°ë¹ˆ","ìŠ¹í˜¸","ì›…ê¸°","í•™í˜„","ë²”ì„±","ì„±í•´",
"ì‘ê·œ","ì˜í™˜","ìƒê±´","ì¬ë•","ì˜¥ì—°","ìˆ˜ì‹ ","ì˜¤ì±„","ì€ìš°","ì •í›ˆ",
"ìš©ë‚¨","ì„±í›ˆ","ì›ë¹ˆ","ê¸¸ìš´","ëŒ€í˜„","ì§„ì†”","ì„œì§„","ì´ìŠ¬","ë¯¼êµ­",
"ì„±ì²œ","ì¶©í›ˆ"
];

const tasks = [
"LH íœ€ë‹¤","LH Bí•„ë¼","Lì—ì–´ë°±íˆ¬ì…","2ì¡°1ë²ˆ","LH Cí•„ë¼","SKì£¼ìœ êµ¬",
"ë©¤ë²„ì–´ìŠ¤","LH Aí•„ë¼","ë§ˆìŠ¤í„°ë°±","Lë„ì–´íƒˆê±°","ë‚š1","ë²”í¼ê°€ì´ë“œ",
"2ì¡°2ë²ˆ","ASì»¤ë²„","LH ë£¨1","LH ë£¨2","RH íœ€ë‹¤","RH Bí•„ë¼",
"Rì—ì–´ë°±íˆ¬ì…","RH Cí•„ë¼","R Aí•„ë¼","í›„ë“œ","3ì¡°1ë²ˆ","í•˜ì´ë“œë¡œë‹‰ì²´ê²°",
"ë‚š2","ì—”ì§„ì–´ìŠ¤","3ì¡°2ë²ˆ","RH ë£¨1","RH ë£¨2"
];

function iso(d){return d.toISOString().slice(0,10);}
function wd(d){return "(ì¼ì›”í™”ìˆ˜ëª©ê¸ˆí† "[d.getDay()+1]+")";}
function isWork(d){return d>=START && d.getDay()!==0;}
function workIndex(d){
 let i=-1, c=new Date(START);
 while(c<=d){
  if(isWork(c)){i++; if(iso(c)===iso(d)) return i;}
  c.setDate(c.getDate()+1);
 }
 return null;
}

function schedule(d){
 const idx=workIndex(d);
 if(idx===null) return null;
 return names.map((n,i)=>{
  let r=[];
  for(let k=0;k<4;k++){
   r.push(tasks[(i+idx*4+k)%tasks.length]);
  }
  return {n,r};
 });
}

function renderDay(){
 const d=new Date(d3.value);
 w3.textContent=wd(d);
 const s=schedule(d);
 tbody.innerHTML="";
 if(!s) return;
 s.forEach(o=>{
  tbody.innerHTML+=`<tr><td class="name-col">${o.n}</td>
  <td>${o.r[0]}</td><td>${o.r[1]}</td><td>${o.r[2]}</td><td>${o.r[3]}</td></tr>`;
 });
}

function findWorker(){
 const d=new Date(d1.value);
 w1.textContent=wd(d);
 const s=schedule(d);
 const r=round.value;
 let out="";
 [task1,task2,task3].forEach(sel=>{
  if(sel.value){
   const f=s.find(x=>x.r[r]===sel.value);
   out+=`${sel.value} â†’ ${f?f.n:"ì—†ìŒ"}<br>`;
  }
 });
 r1.innerHTML=out;
}

function findPerson(){
 const d=new Date(d2.value);
 w2.textContent=wd(d);
 const s=schedule(d);
 let out="";
 [p1,p2,p3].forEach(sel=>{
  if(sel.value){
   const f=s.find(x=>x.n===sel.value);
   out+=`<b>${sel.value}</b><br>
   1R:${f.r[0]}<br>2R:${f.r[1]}<br>3R:${f.r[2]}<br>4R:${f.r[3]}<hr>`;
  }
 });
 r2.innerHTML=out;
}

function init(){
[d1,d2,d3].forEach(i=>i.value=iso(new Date()));
tasks.forEach(t=>{
 [task1,task2,task3].forEach(s=>s.innerHTML+=`<option>${t}</option>`);
});
names.forEach(n=>{
 [p1,p2,p3].forEach(s=>s.innerHTML+=`<option>${n}</option>`);
});
renderDay();
}
init();
</script>
</body>
</html>