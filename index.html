<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary-blue:#007aff;
  --bg-gray:#f5f5f7;
  --border-gray:#ddd;
  --header-dark:#111;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:var(--bg-gray);
}

.header{
  position:sticky;
  top:0;
  background:var(--header-dark);
  color:#fff;
  padding:16px 12px;
  text-align:center;
  z-index:10;
}

.header-title{
  font-size:22px;
  font-weight:800;
  margin-bottom:10px;
}

.today-btn{
  padding:8px 18px;
  border-radius:999px;
  border:none;
  background:#0a8a43;
  color:#fff;
  font-size:14px;
}

.container{
  max-width:960px;
  margin:auto;
  padding:16px;
}

.card{
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
  border:1px solid var(--border-gray);
}

h2{
  font-size:16px;
  margin-bottom:8px;
}

label{
  font-size:13px;
  font-weight:600;
}

input,select{
  padding:6px 10px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
  margin-bottom:6px;
}

.primary-btn{
  padding:8px 14px;
  border-radius:999px;
  border:none;
  background:var(--primary-blue);
  color:#fff;
  font-size:14px;
}

.warning{color:#c00;font-size:13px;margin-top:6px}

.table-wrapper{
  overflow-x:auto;
  background:#fff;
  border-radius:12px;
}

table{
  border-collapse:collapse;
  min-width:600px;
}

th,td{
  border-bottom:1px solid #eee;
  padding:6px 8px;
  white-space:nowrap;
  text-align:center;
}

th{background:#fafafa}

.name-col{
  position:sticky;
  left:0;
  background:#fff;
  text-align:left;
  font-weight:700;
}

.result .name{color:var(--primary-blue);font-weight:700}
</style>
</head>

<body>

<header class="header">
  <div class="header-title">íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</div>
  <button class="today-btn" onclick="goToToday()">ğŸ“‹ íŠ¹ê·¼ ì°¸ì—¬ ì¡°ì‚¬</button>
</header>

<div class="container">

<!-- â‘  ì‘ì—… â†’ ë‹´ë‹¹ì -->
<div class="card">
<h2>â‘  ë‚ ì§œ + ë¼ìš´ë“œ + ì‘ì—…ëª…</h2>
<input type="date" id="lookupDate"><br>
<select id="lookupRound">
<option value="0">1ë¼ìš´ë“œ</option>
<option value="1">2ë¼ìš´ë“œ</option>
<option value="2">3ë¼ìš´ë“œ</option>
<option value="3">4ë¼ìš´ë“œ</option>
</select><br>
<select id="lookupTask1"></select><br>
<select id="lookupTask2"></select><br>
<select id="lookupTask3"></select><br>
<button class="primary-btn" onclick="findByTask()">ì¡°íšŒ</button>
<div id="lookupResult" class="result"></div>
</div>

<!-- â‘¡ ê°œì¸ -->
<div class="card">
<h2>â‘¡ ë‚ ì§œ + ì‘ì—…ì</h2>
<input type="date" id="personDate"><br>
<select id="person1"></select><br>
<select id="person2"></select><br>
<select id="person3"></select><br>
<button class="primary-btn" onclick="findByPerson()">ì¡°íšŒ</button>
<div id="personResult" class="result"></div>
</div>

<!-- â‘¢ ì „ì²´ -->
<div class="card">
<h2>â‘¢ í•˜ë£¨ ì „ì²´ ìŠ¤ì¼€ì¤„</h2>
<input type="date" id="dateInput">
<button class="primary-btn" onclick="renderDaily()">ì¡°íšŒ</button>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th class="name-col">ì´ë¦„</th>
<th>1R</th><th>2R</th><th>3R</th><th>4R</th>
</tr>
</thead>
<tbody id="dailyBody"></tbody>
</table>
</div>
</div>

</div>

<script>
/* ========= ê¸°ì¤€ ë°ì´í„° ========= */

const CHANGE_DATE = new Date("2026-01-05");

/* 1ì›” 5ì¼ ì´í›„ */
const namesAfter = [
"ì˜í›ˆ","ê°‘ìˆ˜","ê¸°ë°±","ìš°ë¹ˆ","ìŠ¹í˜¸","ì›…ê¸°","í•™í˜„","ë²”ì„±","ì„±í•´","ì‘ê·œ",
"ì˜í™˜","ìƒê±´","ì¬ë•","ì˜¥ì—°","ìˆ˜ì‹ ","ì˜¤ì±„","ì€ìš°","ì •í›ˆ","ìš©ë‚¨",
"ì„±í›ˆ","ì›ë¹ˆ","ê¸¸ìš´","ëŒ€í˜„","ì§„ì†”","ì„œì§„","ì´ìŠ¬","ë¯¼êµ­","ì„±ì²œ","ì¶©í›ˆ"
];

const tasksAfter = [
"LHíœ€ë‹¤","LH Bí•„ë¼","Lì—ì–´ë°±íˆ¬ì…","2ì¡°1ë²ˆ","LH Cí•„ë¼",
"SKì£¼ìœ êµ¬","ë©¤ë²„ì–´ìŠ¤","LH Aí•„ë¼","ë§ˆìŠ¤í„°ë°±","Lë„ì–´íƒˆê±°",
"ë‚š1","ë²”í¼ê°€ì´ë“œ","2ì¡°2ë²ˆ","ASì»¤ë²„","LH ë£¨1","LH ë£¨2",
"RH íœ€ë‹¤","RH Bí•„ë¼","Rì—ì–´ë°±íˆ¬ì…","RH Cí•„ë¼","R Aí•„ë¼",
"í›„ë“œ","3ì¡°1ë²ˆ","í•˜ì´ë“œë¡œë‹‰ì²´ê²°","ë‚š2","ì—”ì§„ì–´ìŠ¤",
"3ì¡°2ë²ˆ","RH ë£¨1","RH ë£¨2"
];

function isWorkday(d){
  return d.getDay()!==0;
}

function workIndex(date){
  let idx=0;
  let d=new Date(CHANGE_DATE);
  while(d<date){
    if(isWorkday(d)) idx++;
    d.setDate(d.getDate()+1);
  }
  return idx;
}

function getSchedule(date){
  const idx=workIndex(date)*4;
  return namesAfter.map((n,i)=>{
    let r=[];
    for(let k=0;k<4;k++){
      r.push(tasksAfter[(idx+i+k)%tasksAfter.length]);
    }
    return {name:n,rounds:r};
  });
}

/* ========= ê¸°ëŠ¥ ========= */

function renderDaily(){
  const d=new Date(dateInput.value);
  const body=document.getElementById("dailyBody");
  body.innerHTML="";
  if(!isWorkday(d)) return;

  getSchedule(d).forEach(r=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td class="name-col">${r.name}</td>
    <td>${r.rounds[0]}</td><td>${r.rounds[1]}</td>
    <td>${r.rounds[2]}</td><td>${r.rounds[3]}</td>`;
    body.appendChild(tr);
  });
}

function findByTask(){
  const d=new Date(lookupDate.value);
  const r=parseInt(lookupRound.value);
  const tasks=[lookupTask1.value,lookupTask2.value,lookupTask3.value].filter(Boolean);
  let html="";
  getSchedule(d).forEach(s=>{
    if(tasks.includes(s.rounds[r])){
      html+=`${s.rounds[r]} â†’ <span class="name">${s.name}</span><br>`;
    }
  });
  lookupResult.innerHTML=html||"ì—†ìŒ";
}

function findByPerson(){
  const d=new Date(personDate.value);
  const names=[person1.value,person2.value,person3.value].filter(Boolean);
  let html="";
  const sch=getSchedule(d);
  names.forEach(n=>{
    const s=sch.find(x=>x.name===n);
    html+=`<b>${n}</b><br>${s.rounds.join("<br>")}<hr>`;
  });
  personResult.innerHTML=html;
}

function goToToday(){
  const t=new Date();
  dateInput.value=t.toISOString().slice(0,10);
  lookupDate.value=dateInput.value;
  personDate.value=dateInput.value;
  renderDaily();
}

/* ì´ˆê¸°í™” */
window.onload=()=>{
  [...document.querySelectorAll("select")].forEach(s=>s.innerHTML+="<option value=''>-</option>");
  namesAfter.forEach(n=>{
    person1.innerHTML+=`<option>${n}</option>`;
    person2.innerHTML+=`<option>${n}</option>`;
    person3.innerHTML+=`<option>${n}</option>`;
  });
  tasksAfter.forEach(t=>{
    lookupTask1.innerHTML+=`<option>${t}</option>`;
    lookupTask2.innerHTML+=`<option>${t}</option>`;
    lookupTask3.innerHTML+=`<option>${t}</option>`;
  });
  goToToday();
};
</script>

</body>
</html>