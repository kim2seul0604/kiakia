<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#f5f5f7;
  color:#222;
}

header {
  background:#111;
  color:#fff;
  padding:16px;
  text-align:center;
  position:sticky;
  top:0;
  z-index:10;
}

.today-btn {
  margin-top:10px;
  padding:8px 18px;
  border:none;
  border-radius:999px;
  background:#0a8a43;
  color:#fff;
}

.container {
  max-width:960px;
  margin:0 auto;
  padding:16px;
}

.card {
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:16px;
  box-shadow:0 6px 16px rgba(0,0,0,.06);
}

h2 { font-size:16px; margin-bottom:10px; }

label { font-size:13px; font-weight:600; }

input, select {
  padding:6px 10px;
  font-size:14px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-bottom:6px;
}

button.primary {
  padding:8px 16px;
  border-radius:999px;
  border:none;
  background:#007aff;
  color:#fff;
}

.warning { color:#c00; font-size:13px; margin-top:6px; }

.table-wrap {
  overflow-x:auto;
  margin-top:8px;
}

table {
  border-collapse:collapse;
  min-width:600px;
  width:max-content;
  font-size:11.5px; /* ğŸ‘ˆ 1ë²ˆ ê¸°ëŠ¥ ê¸€ì ì•½ê°„ ì¶•ì†Œ */
}

th, td {
  padding:6px 8px;
  border-bottom:1px solid #eee;
  text-align:center;
  white-space:nowrap;
}

th { background:#fafafa; }

.name-col {
  position:sticky;
  left:0;
  background:#fff;
  font-weight:700;
  z-index:2;
}

/* ë¼ìš´ë“œ ìƒ‰ìƒ */
.round-1 { color:#aaa; }
.round-2 { color:#777; }
.round-3 { color:#444; }
.round-4 { color:#000; font-weight:600; }
</style>
</head>

<body>

<header>
  <div style="font-size:22px;font-weight:800;">íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</div>
  <button class="today-btn" onclick="goToday()">ì˜¤ëŠ˜</button>
</header>

<div class="container">

<!-- â‘  í•˜ë£¨ ì „ì²´ -->
<div class="card">
<h2>â‘  í•˜ë£¨ ì „ì²´ ìŠ¤ì¼€ì¤„ ë³´ê¸°</h2>
<input type="date" id="dayDate">
<button class="primary" onclick="renderDay()">ì¡°íšŒ</button>
<div id="dayWarn" class="warning"></div>

<div class="table-wrap">
<table>
<thead>
<tr>
<th class="name-col">ì´ë¦„</th>
<th>1R</th><th>2R</th><th>3R</th><th>4R</th>
</tr>
</thead>
<tbody id="dayBody"></tbody>
</table>
</div>
</div>

<!-- â‘¡ ì‘ì—… â†’ ë‹´ë‹¹ì -->
<div class="card">
<h2>â‘¡ ë‚ ì§œ + ë¼ìš´ë“œ + ì‘ì—… â†’ ë‹´ë‹¹ì</h2>
<input type="date" id="findDate"><br>
<select id="findRound">
<option value="0">1ë¼ìš´ë“œ</option>
<option value="1">2ë¼ìš´ë“œ</option>
<option value="2">3ë¼ìš´ë“œ</option>
<option value="3">4ë¼ìš´ë“œ</option>
</select><br>
<select id="task1"></select><br>
<select id="task2"></select><br>
<select id="task3"></select><br>
<button class="primary" onclick="findPerson()">ì°¾ê¸°</button>
<div id="findResult"></div>
</div>

<!-- â‘¢ ê°œì¸ ì‘ì—… -->
<div class="card">
<h2>â‘¢ ë‚ ì§œ + ì‘ì—…ì â†’ ê°œì¸ ì‘ì—…</h2>
<input type="date" id="personDate"><br>
<select id="p1"></select><br>
<select id="p2"></select><br>
<select id="p3"></select><br>
<button class="primary" onclick="showPerson()">ì¡°íšŒ</button>
<div id="personResult"></div>
</div>

</div>

<script>
/* ===== ê¸°ì¤€ ===== */
const START = new Date(2026,0,5);

const HOLIDAYS = [
"2026-02-16","2026-02-17","2026-02-18","2026-02-19"
];

const names = [
"ì˜í›ˆ","ê°‘ìˆ˜","ê¸°ë°±","ìš°ë¹ˆ","ìŠ¹í˜¸","ì›…ê¸°","í•™í˜„","ë²”ì„±","ì„±í•´",
"ì‘ê·œ","ì˜í™˜","ìƒê±´","ì¬ë•","ì˜¥ì—°","ìˆ˜ì‹ ","ì˜¤ì±„","ì€ìš°","ì •í›ˆ","ìš©ë‚¨",
"ì„±í›ˆ","ì›ë¹ˆ","ê¸¸ìš´","ëŒ€í˜„","ì§„ì†”","ì„œì§„","ì´ìŠ¬","ë¯¼êµ­","ì„±ì²œ","ì¶©í›ˆ"
];

const tasks = [
"LHíœ€ë‹¤","LH Bí•„ë¼","Lì—ì–´ë°±íˆ¬ì…","2ì¡°1ë²ˆ","LH Cí•„ë¼",
"SKì£¼ìœ êµ¬","ë©¤ë²„ì–´ìŠ¤","LH Aí•„ë¼","ë§ˆìŠ¤í„°ë°±","Lë„ì–´íƒˆê±°",
"ë‚š1","ë²”í¼ê°€ì´ë“œ","2ì¡°2ë²ˆ","ASì»¤ë²„","LH ë£¨1","LH ë£¨2",
"RH íœ€ë‹¤","RH Bí•„ë¼","Rì—ì–´ë°±íˆ¬ì…","RH Cí•„ë¼","R Aí•„ë¼",
"í›„ë“œ","3ì¡°1ë²ˆ","í•˜ì´ë“œë¡œë‹‰ì²´ê²°","ë‚š2","ì—”ì§„ì–´ìŠ¤",
"3ì¡°2ë²ˆ","RH ë£¨1","RH ë£¨2"
];

/* ===== ìœ í‹¸ ===== */
function iso(d){ return d.toISOString().slice(0,10); }

function isWork(d){
  if(d < START) return false;
  if(d.getDay() === 0) return false;
  return !HOLIDAYS.includes(iso(d));
}

function workIndex(d){
  if(!isWork(d)) return null;
  let i = -1;
  let t = new Date(START);
  while(t <= d){
    if(isWork(t)) i++;
    if(iso(t) === iso(d)) return i;
    t.setDate(t.getDate() + 1);
  }
  return null;
}

/* ===== ìŠ¤ì¼€ì¤„ ===== */
function getSchedule(d){
  const idx = workIndex(d);
  if(idx === null) return null;

  return names.map((name,i)=>{
    const rounds=[];
    for(let r=0;r<4;r++){
      rounds.push(tasks[(i*4 + idx*4 + r) % tasks.length]);
    }
    return { name, rounds };
  });
}

/* ===== ê¸°ëŠ¥ ===== */
function renderDay(){
  const d = new Date(dayDate.value);
  dayBody.innerHTML="";
  if(!isWork(d)){
    dayWarn.textContent="íœ´ë¬´ì¼ì…ë‹ˆë‹¤.";
    return;
  }
  dayWarn.textContent="";
  const s = getSchedule(d);
  s.forEach(r=>{
    dayBody.innerHTML += `
    <tr>
      <td class="name-col">${r.name}</td>
      <td class="round-1">${r.rounds[0]}</td>
      <td class="round-2">${r.rounds[1]}</td>
      <td class="round-3">${r.rounds[2]}</td>
      <td class="round-4">${r.rounds[3]}</td>
    </tr>`;
  });
}

function findPerson(){
  const d=new Date(findDate.value);
  if(!isWork(d)) return;
  const s=getSchedule(d);
  const r=findRound.value;
  const sel=[task1,task2,task3].map(x=>x.value).filter(Boolean);
  findResult.innerHTML="";
  sel.forEach(t=>{
    const p=s.find(x=>x.rounds[r]===t);
    findResult.innerHTML+=`${t} â†’ ${p?p.name:"ì—†ìŒ"}<br>`;
  });
}

function showPerson(){
  const d=new Date(personDate.value);
  if(!isWork(d)) return;
  const s=getSchedule(d);
  const sel=[p1,p2,p3].map(x=>x.value).filter(Boolean);
  personResult.innerHTML="";
  sel.forEach(n=>{
    const r=s.find(x=>x.name===n);
    personResult.innerHTML+=`
    <b>${n}</b><br>
    1R ${r.rounds[0]}<br>
    2R ${r.rounds[1]}<br>
    3R ${r.rounds[2]}<br>
    4R ${r.rounds[3]}<hr>`;
  });
}

/* ===== ì´ˆê¸°í™” ===== */
function fillSorted(sel, arr){
  sel.innerHTML="<option value=''>- ì„ íƒ -</option>";
  [...arr].sort((a,b)=>a.localeCompare(b,"ko")).forEach(v=>{
    sel.innerHTML+=`<option>${v}</option>`;
  });
}

fillSorted(task1,tasks); fillSorted(task2,tasks); fillSorted(task3,tasks);
fillSorted(p1,names); fillSorted(p2,names); fillSorted(p3,names);

function goToday(){
  const t=new Date();
  const d=isWork(t)?t:START;
  dayDate.value=iso(d);
  findDate.value=iso(d);
  personDate.value=iso(d);
  renderDay();
}
goToday();
</script>

</body>
</html>