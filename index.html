<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:#f5f5f7;
    color:#222;
  }

  header{
    background:#111;
    color:#fff;
    padding:16px;
    text-align:center;
    position:sticky;
    top:0;
    z-index:10;
  }

  .today-btn{
    margin-top:10px;
    padding:8px 18px;
    border:none;
    border-radius:999px;
    background:#0a8a43;
    color:#fff;
  }

  .container{
    max-width:960px;
    margin:0 auto;
    padding:16px;
  }

  .card{
    background:#fff;
    border-radius:16px;
    padding:14px;
    margin-bottom:16px;
    box-shadow:0 6px 16px rgba(0,0,0,.06);
  }

  h2{
    font-size:16px;
    margin-bottom:10px;
    text-align:center;
  }

  input{
    padding:6px 10px;
    font-size:14px;
    border-radius:8px;
    border:1px solid #ccc;
  }

  button.primary{
    padding:8px 16px;
    border-radius:999px;
    border:none;
    background:#007aff;
    color:#fff;
  }

  .warning{
    color:#c00;
    font-size:13px;
    margin-top:6px;
    text-align:center;
  }

  /* ë‚ ì§œ + ì¡°íšŒ ë²„íŠ¼ ê°€ìš´ë° ì •ë ¬ */
  .date-row{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:10px;
    margin-bottom:6px;
  }

  .table-wrap{
    overflow-x:auto;
    margin-top:8px;
  }

  table{
    border-collapse:collapse;
    min-width:600px;
    width:max-content;
    font-size:11.5px;
  }

  th, td{
    padding:6px 8px;
    border-bottom:1px solid #eee;
    text-align:center;
    white-space:nowrap;
  }

  th{
    background:#fafafa;
  }

  .name-col{
    position:sticky;
    left:0;
    background:#fff;
    font-weight:700;
    z-index:2;
  }

  /* ë¼ìš´ë“œ ì‹œì¸ì„± (íŒŒë‘ê³„ì—´) */
  .round-1{ color:#4B5FA8; }
  .round-2{ color:#66B2FF; }
  .round-3{ color:#1E88E5; }
  .round-4{ color:#0D47A1; font-weight:600; }

  /* ê³µì§€ ë°•ìŠ¤ */
  .notice{
    margin-top:12px;
    padding:12px;
    border-radius:12px;
    background:#fafafa;
    border:1px solid #eee;
    font-size:13px;
    line-height:1.45;
    white-space:pre-line;
  }
  .notice-title{
    font-weight:800;
    margin-bottom:6px;
    color:#111;
  }

  /* â“ ë„ì›€ë§ ë²„íŠ¼ */
  .help-btn{
    position:fixed;
    right:14px;
    bottom:14px;
    width:44px;
    height:44px;
    border-radius:50%;
    border:none;
    background:#007aff;
    color:#fff;
    font-size:22px;
    font-weight:800;
    box-shadow:0 4px 10px rgba(0,0,0,.25);
    z-index:50;
  }
</style>
</head>

<body>
<header>
  <div style="font-size:22px;font-weight:800;">íŠ¸ë¦¼2ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ ì¡°íšŒ</div>
  <button class="today-btn" onclick="goToday()">ì˜¤ëŠ˜ë„ í™”ì´íŒ…~â€¼ï¸</button>
</header>

<div class="container">
  <div class="card">
    <h2>ğŸ¥âœˆï¸ íŠ¸ë¦¼ 2ë°˜ ì „ì²´ ìŠ¤ì¼€ì¤„ ì¡°íšŒí•˜ê¸° ğŸ€ğŸ¥</h2>

    <div class="date-row">
      <input type="date" id="dayDate" />
      <button class="primary" onclick="renderDay()">ì¡°íšŒ</button>
    </div>

    <div id="dayWarn" class="warning"></div>

    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th class="name-col">ì´ë¦„</th>
            <th>1R</th>
            <th>2R</th>
            <th>3R</th>
            <th>4R</th>
          </tr>
        </thead>
        <tbody id="dayBody"></tbody>
      </table>
    </div>

    <!-- âœ… ê³µì§€ ì˜ì—­ (ì—¬ê¸° ë‚´ìš©ë§Œ ë°”ê¿”ì„œ ê³µì§€í•˜ë©´ ë¨) -->
    <div class="notice" id="noticeBox">
      <div class="notice-title">ğŸ“Œ ê³µì§€</div>
      <div id="noticeText"></div>
    </div>
  </div>
</div>

<button class="help-btn" id="helpBtn">?</button>

<script>
/* =========================
   âœ… ê³µì§€ ë‚´ìš© (ì—¬ê¸°ë§Œ ìˆ˜ì •)
   ========================= */
const NOTICE_TEXT =
`- 1/22 4ë¼ìš´ë“œ ë¯¸ì‹¤ì‹œ(íˆ¬í‘œ)
- ì„¤ë‚  íœ´ë¬´(2/16~2/19)
- 1/19 ì‘ì—…/ì¸ì› ì¶”ê°€ ë°˜ì˜ (ë¬¸ì •, ì¡±ì¥(SCU))`;

/* ===== ì•„ì´í° ì•ˆì „ ë‚ ì§œ íŒŒì‹± ===== */
function parseDate(v){
  if(!v) return null;
  const [y,m,d] = v.split('-').map(Number);
  return new Date(y, m-1, d);
}

/* ===== ë¡œì»¬(í•œêµ­ì‹œê°„) ISO ë¬¸ìì—´ ===== */
function pad2(n){ return String(n).padStart(2,'0'); }
function isoLocal(d){
  return d.getFullYear() + "-" + pad2(d.getMonth()+1) + "-" + pad2(d.getDate());
}

/* =========================
   âœ… ê¸°ì¤€ ì„¤ì •
   ========================= */
const START = new Date(2026,0,5); // 2026-01-05

/* ê¸°ì¤€ì¼ (2026-01-19): LHíœ€ë‹¤ = ìƒê±´ */
const BASE_DATE = new Date(2026,0,19);
const BASE_TASK = "LHíœ€ë‹¤";
const BASE_PERSON = "ìƒê±´";

/* íœ´ë¬´ì¼(ì„¤ë‚  ë“±) */
const HOLIDAYS = [
  "2026-02-16",
  "2026-02-17",
  "2026-02-18",
  "2026-02-19"
];

/* âœ… 4ë¼ìš´ë“œ ë¯¸ì‹¤ì‹œ(=ê·¸ë‚ ì€ 3ì¹¸ë§Œ ì§„í–‰) â†’ ë‹¤ìŒë‚ ë¶€í„° ì „ì²´ 1ì¹¸ ë°€ë¦¼ */
const SHIFT_MINUS_ONE_DAYS = [
  "2026-01-22"
];

/* ì‘ì—…ì ìˆœì„œ (19ì¼ë¶€í„°: ì¤€í˜„-ë¬¸ì •-ì„œì§„) */
const names = [
  "ì˜í›ˆ","ê°‘ìˆ˜","ê¸°ë°±","ìš°ë¹ˆ","ìŠ¹í˜¸","ì›…ê¸°","í•™í˜„","ë²”ì„±","ì„±í•´",
  "ì‘ê·œ","ì˜í™˜","ìƒê±´","ì¬ë•","ì˜¥ì—°","ìˆ˜ì‹ ","ì˜¤ì±„","ì€ìš°","ì •í›ˆ","ìš©ë‚¨",
  "ì„±í›ˆ","ì›ë¹ˆ","ê¸¸ìš´","ëŒ€í˜„","ì§„ì†”","ì¤€í˜„","ë¬¸ì •","ì„œì§„","ì´ìŠ¬","ë¯¼êµ­","ì„±ì²œ","ì¶©í›ˆ"
];

/* ì‘ì—… ìˆœì„œ (ASì»¤ë²„-ì¡±ì¥(SCU)-LH ë£¨1) */
const tasks = [
  "LHíœ€ë‹¤","LH Bí•„ë¼","Lì—ì–´ë°±íˆ¬ì…","2ì¡°1ë²ˆ","LH Cí•„ë¼",
  "SKì£¼ìœ êµ¬","ë©¤ë²„ì–´ìŠ¤","LH Aí•„ë¼","ë§ˆìŠ¤í„°ë°±","Lë„ì–´íƒˆê±°",
  "ë‚š1","ë²”í¼ê°€ì´ë“œ","2ì¡°2ë²ˆ","ASì»¤ë²„","ì¡±ì¥(SCU)","LH ë£¨1","LH ë£¨2",
  "RH íœ€ë‹¤","RH Bí•„ë¼","Rì—ì–´ë°±íˆ¬ì…","RH Cí•„ë¼","R Aí•„ë¼",
  "í›„ë“œ","3ì¡°1ë²ˆ","Rë„ì–´íƒˆê±°","í•˜ì´ë“œë¡œë‹‰ì²´ê²°","ë‚š2","ì—”ì§„ì–´ìŠ¤",
  "3ì¡°2ë²ˆ","RH ë£¨1","RH ë£¨2"
];

/* ===== ê·¼ë¬´ì¼ ì²´í¬ ===== */
function isWork(d){
  if(d < START) return false;
  if(d.getDay() === 0) return false;          // ì¼ìš”ì¼
  return !HOLIDAYS.includes(isoLocal(d));     // ë¡œì»¬ ë‚ ì§œë¡œ ë¹„êµ
}

/* ===== BASE_DATE ~ targetDate ê¹Œì§€ ëˆ„ì  shift(ì¹¸ ì´ë™) ê³„ì‚° =====
   - ê¸°ë³¸: ê·¼ë¬´ì¼ í•˜ë£¨ = +4ì¹¸
   - SHIFT_MINUS_ONE_DAYS í•´ë‹¹ì¼: +3ì¹¸ (4R ë¯¸ì‹¤ì‹œ)
*/
function calcShiftByDate(targetDate){
  let shift = 0;
  let d = new Date(BASE_DATE.getTime());

  while(isoLocal(d) < isoLocal(targetDate)){
    if(isWork(d)){
      const iso = isoLocal(d);
      if(SHIFT_MINUS_ONE_DAYS.includes(iso)){
        shift += 3; // 4ë¼ìš´ë“œ ë¯¸ì‹¤ì‹œ
      }else{
        shift += 4;
      }
    }
    d.setDate(d.getDate() + 1);
  }
  return shift;
}

/* ===== ìŠ¤ì¼€ì¤„ ë¡œì§ =====
   ê¸°ì¤€ì¼(BASE_DATE)ì—ì„œ BASE_PERSONê°€ BASE_TASK(ë³´í†µ ì²« ì‘ì—…)ì„ 1Rë¡œ ìˆ˜í–‰í•œë‹¤ê³  ë†“ê³ ,
   ì´í›„ ë‚ ì§œëŠ” ëˆ„ì  shiftë§Œí¼ ì‘ì—… ì¸ë±ìŠ¤ê°€ ì§„í–‰ëœë‹¤ê³  ë³´ë©´ ë¨.
*/
function getSchedule(d){
  if(!isWork(d)) return null;

  const baseTaskIdx = tasks.indexOf(BASE_TASK);
  const basePersonIdx = names.indexOf(BASE_PERSON);
  if(baseTaskIdx < 0 || basePersonIdx < 0) return null;

  const dayShift = calcShiftByDate(d);

  return names.map((name, personIdx)=>{
    const rounds = [];
    for(let r=0; r<4; r++){
      const taskIdx =
        (baseTaskIdx + dayShift + r + (personIdx - basePersonIdx) + tasks.length)
        % tasks.length;
      rounds.push(tasks[taskIdx]);
    }
    return { name, rounds };
  });
}

/* ===== ì¶œë ¥ ===== */
function renderDay(){
  const d = parseDate(document.getElementById("dayDate").value);
  const dayBody = document.getElementById("dayBody");
  const dayWarn = document.getElementById("dayWarn");
  dayBody.innerHTML = "";

  if(!d){
    dayWarn.textContent = "ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.";
    return;
  }

  if(!isWork(d)){
    dayWarn.textContent = "íœ´ë¬´ì¼ì…ë‹ˆë‹¤.";
    return;
  }

  const s = getSchedule(d);
  if(!s){
    dayWarn.textContent = "ìŠ¤ì¼€ì¤„ ê³„ì‚°ì— ë¬¸ì œê°€ ìˆì–´ìš”. (ê¸°ì¤€ ì‘ì—…/ì‘ì—…ì/ë¦¬ìŠ¤íŠ¸ í™•ì¸ í•„ìš”)";
    return;
  }

  dayWarn.textContent = "";

  s.forEach(r=>{
    dayBody.innerHTML += `
      <tr>
        <td class="name-col">${r.name}</td>
        <td class="round-1">${r.rounds[0]}</td>
        <td class="round-2">${r.rounds[1]}</td>
        <td class="round-3">${r.rounds[2]}</td>
        <td class="round-4">${r.rounds[3]}</td>
      </tr>
    `;
  });
}

/* ===== ì˜¤ëŠ˜ ===== */
function goToday(){
  const t = new Date();
  const d = isWork(t) ? t : START;
  document.getElementById("dayDate").value = isoLocal(d);
  renderDay();
}

/* ===== ë„ì›€ë§ ===== */
document.getElementById("helpBtn").addEventListener("click", ()=>{
  alert(
    "ë§Œë“ ì‚¬ëŒ : ê¹€ì´ìŠ¬\n" +
    "ë²„ì „ : v1.0\n" +
    "ìµœì¢… ìˆ˜ì •ì¼ : 2026-01-15"
  );
});

/* ===== ê³µì§€ í‘œì‹œ ===== */
document.getElementById("noticeText").textContent = NOTICE_TEXT;

goToday();
</script>
</body>
</html>